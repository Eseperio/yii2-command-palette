{"version":3,"file":"palette.min.js","sources":["../../src/js/fuzzy.js","../../src/js/i18n.js","../../src/js/dom.js","../../src/js/palette.js"],"sourcesContent":["/**\n * Fuzzy search algorithms for the command palette\n */\n\n/**\n * Returns the minimum Levenshtein distance between the query and any substring of 'text'\n * @param {string} query - The search query\n * @param {string} text - The text to search in\n * @returns {number} - The minimum Levenshtein distance\n */\nexport function fuzzyMinLevenshtein(query, text) {\n    if (!query || !text) return Infinity;\n    let minDist = Infinity;\n\n    // Search in all substrings of the same length as the query\n    for (let i = 0; i <= text.length - query.length; i++) {\n        const substr = text.substr(i, query.length);\n        minDist = Math.min(minDist, levenshtein(query, substr));\n    }\n\n    // Also compare with the full text (in case the query is longer than the text)\n    minDist = Math.min(minDist, levenshtein(query, text));\n\n    return minDist;\n}\n\n/**\n * Standard Levenshtein algorithm\n * @param {string} a - First string\n * @param {string} b - Second string\n * @returns {number} - The Levenshtein distance\n */\nexport function levenshtein(a, b) {\n    const m = a.length, n = b.length;\n\n    if (m === 0) return n;\n    if (n === 0) return m;\n\n    const dp = [];\n    for (let i = 0; i <= m; i++) dp[i] = [i];\n    for (let j = 1; j <= n; j++) dp[0][j] = j;\n\n    for (let i = 1; i <= m; i++) {\n        for (let j = 1; j <= n; j++) {\n            const cost = a[i - 1].toLowerCase() === b[j - 1].toLowerCase() ? 0 : 1;\n            dp[i][j] = Math.min(\n                dp[i - 1][j] + 1,\n                dp[i][j - 1] + 1,\n                dp[i - 1][j - 1] + cost\n            );\n        }\n    }\n\n    return dp[m][n];\n}\n\n/**\n * Filter items based on a search query using fuzzy search\n * @param {string} query - The search query\n * @param {Array} items - The items to filter\n * @returns {Array} - The filtered items\n */\nexport function filterItems(query, items) {\n    if (!query) return items.slice();\n\n    query = query.trim().toLowerCase();\n\n    // Solo coincidencias completas (substring) si <= 3 caracteres\n    let exactMatches =  items.filter(item => {\n        const name = item.name.toLowerCase();\n        const subtitle = item.subtitle ? item.subtitle.toLowerCase() : '';\n        return name.includes(query) || subtitle.includes(query);\n    });\n\n    if(exactMatches.length > 0) {\n        // Si hay coincidencias exactas y la consulta es corta, devolver solo esas\n        return exactMatches;\n    }\n\n    // Búsqueda difusa si > 3 caracteres\n    return items\n        .map(item => {\n            const name = item.name.toLowerCase();\n            const subtitle = item.subtitle ? item.subtitle.toLowerCase() : '';\n            const distName = fuzzyMinLevenshtein(query, name);\n            const distSubtitle = subtitle ? fuzzyMinLevenshtein(query, subtitle) : Infinity;\n            const score = Math.min(distName, distSubtitle);\n\n            const substringMatch = name.includes(query) || subtitle.includes(query);\n            return {...item, _score: score, _substringMatch: substringMatch};\n        })\n        .sort((a, b) => {\n            if (a._substringMatch && !b._substringMatch) return -1;\n            if (!a._substringMatch && b._substringMatch) return 1;\n            return a._score - b._score;\n        })\n        .filter(item =>\n            item._substringMatch ||\n            item._score <= 2\n        );\n}\n","/**\n * Internationalization for the command palette\n * Contains translations for the 10 most common languages\n */\n\nconst translations = {\n    // English\n    'en': {\n        'search': 'Search...',\n        'noResults': 'No results'\n    },\n    // Spanish\n    'es': {\n        'search': 'Buscar...',\n        'noResults': 'Sin resultados'\n    },\n    // French\n    'fr': {\n        'search': 'Rechercher...',\n        'noResults': 'Aucun résultat'\n    },\n    // German\n    'de': {\n        'search': 'Suchen...',\n        'noResults': 'Keine Ergebnisse'\n    },\n    // Italian\n    'it': {\n        'search': 'Cerca...',\n        'noResults': 'Nessun risultato'\n    },\n    // Portuguese\n    'pt': {\n        'search': 'Pesquisar...',\n        'noResults': 'Sem resultados'\n    },\n    // Russian\n    'ru': {\n        'search': 'Поиск...',\n        'noResults': 'Нет результатов'\n    },\n    // Chinese (Simplified)\n    'zh': {\n        'search': '搜索...',\n        'noResults': '没有结果'\n    },\n    // Japanese\n    'ja': {\n        'search': '検索...',\n        'noResults': '結果なし'\n    },\n    // Arabic\n    'ar': {\n        'search': 'بحث...',\n        'noResults': 'لا نتائج'\n    }\n};\n\n/**\n * Get a translation for a key in the specified locale\n * @param {string} key - The translation key\n * @param {string} locale - The locale code\n * @returns {string} - The translated string or the key if no translation is found\n */\nexport function getTranslation(key, locale = 'en') {\n    // If the locale doesn't exist, fall back to English\n    if (!translations[locale]) {\n        locale = 'en';\n    }\n    \n    // If the key doesn't exist, return the key itself\n    return translations[locale][key] || key;\n}\n\n/**\n * Get all translations for a locale\n * @param {string} locale - The locale code\n * @returns {Object} - The translations object for the locale\n */\nexport function getTranslations(locale = 'en') {\n    // If the locale doesn't exist, fall back to English\n    return translations[locale] || translations['en'];\n}\n\nexport default {\n    getTranslation,\n    getTranslations\n};\n","/**\n * DOM handling helpers for the command palette\n */\n\nimport { getTranslation } from './i18n.js';\n\n/**\n * Renders a list of items in the command palette\n * @param {HTMLElement} listElement - The list element to render items in\n * @param {Array} items - The items to render\n * @param {number} selectedIdx - The index of the selected item\n * @param {string} locale - The locale for translations\n * @returns {void}\n */\nexport function renderList(listElement, items, selectedIdx = 0, locale = 'en') {\n    // Store the previously selected item index\n    const prevSelectedIdx = listElement.getAttribute('data-selected-idx');\n    \n    // Get the current items count from the list\n    const currentItemsCount = listElement.querySelectorAll('.cmdk-item').length;\n    \n    // If this is just a selection change and the list is already populated with the same number of items\n    // This ensures we do a full redraw when search results change (different number of items)\n    if (listElement.children.length > 0 && items.length > 0 && \n        items.length === currentItemsCount && prevSelectedIdx !== null) {\n        // Update only the selection state\n        const prevSelected = listElement.querySelector(`.cmdk-item[data-idx=\"${prevSelectedIdx}\"]`);\n        const newSelected = listElement.querySelector(`.cmdk-item[data-idx=\"${selectedIdx}\"]`);\n        \n        if (prevSelected) {\n            prevSelected.classList.remove('selected');\n        }\n        \n        if (newSelected) {\n            newSelected.classList.add('selected');\n            // Update the stored selected index\n            listElement.setAttribute('data-selected-idx', selectedIdx);\n            return;\n        }\n    }\n    \n    // If we need to do a full render (first render or items changed)\n    listElement.innerHTML = '';\n    \n    if (items.length === 0) {\n        const noResultsText = getTranslation('noResults', locale);\n        listElement.innerHTML = `<li style=\"padding: 16px; color: #8b8b93;\">${noResultsText}</li>`;\n        return;\n    }\n    \n    // Get the template ID from the list element ID\n    const id = listElement.id.replace('cmdkList-', '');\n    const templateElement = document.getElementById(`cmdkItemTemplate-${id}`);\n    \n    if (!templateElement) {\n        console.error(`Template element not found: cmdkItemTemplate-${id}`);\n        return;\n    }\n    \n    const templateContent = templateElement.innerHTML;\n    \n    // Create a document fragment to improve performance\n    const fragment = document.createDocumentFragment();\n    \n    items.forEach((item, idx) => {\n        // Create a new item from the template\n        let itemHtml = templateContent;\n        \n        // Replace placeholders with actual values\n        itemHtml = itemHtml.replace(/{{idx}}/g, idx);\n        itemHtml = itemHtml.replace(/{{name}}/g, item.name || '');\n        \n        // Handle icon\n        if (item.icon) {\n            // Check if the icon is a URL\n            if (typeof item.icon === 'string' && item.icon.match(/^https?:\\/\\//)) {\n                // Replace the icon placeholder with an img tag\n                itemHtml = itemHtml.replace(/{{#icon}}([\\s\\S]*?){{\\/icon}}/g, \n                    `<img src=\"${item.icon}\" class=\"cmdk-icon\" style=\"width: 22px; height: 22px; object-fit: cover;\">`);\n            } else {\n                // Replace the icon content\n                itemHtml = itemHtml.replace(/{{icon}}/g, item.icon);\n                // Keep the icon block\n                itemHtml = itemHtml.replace(/{{#icon}}([\\s\\S]*?){{\\/icon}}/g, '$1');\n            }\n        } else {\n            // Remove the icon block\n            itemHtml = itemHtml.replace(/{{#icon}}[\\s\\S]*?{{\\/icon}}/g, '');\n        }\n        \n        // Handle subtitle\n        if (item.subtitle) {\n            itemHtml = itemHtml.replace(/{{subtitle}}/g, item.subtitle);\n            itemHtml = itemHtml.replace(/{{#subtitle}}([\\s\\S]*?){{\\/subtitle}}/g, '$1');\n        } else {\n            itemHtml = itemHtml.replace(/{{#subtitle}}[\\s\\S]*?{{\\/subtitle}}/g, '');\n        }\n        \n        // Create a temporary element to hold the HTML\n        const temp = document.createElement('div');\n        temp.innerHTML = itemHtml;\n        const li = temp.firstElementChild;\n        \n        // Add selected class if this is the selected item\n        if (idx === selectedIdx) {\n            li.classList.add('selected');\n        }\n        \n        fragment.appendChild(li);\n    });\n    \n    // Append all items at once\n    listElement.appendChild(fragment);\n    \n    // Store the selected index as a data attribute\n    listElement.setAttribute('data-selected-idx', selectedIdx);\n}\n\n/**\n * Scrolls to the selected item in the list\n * @param {HTMLElement} listElement - The list element\n * @returns {void}\n */\nexport function scrollToSelected(listElement) {\n    const selected = listElement.querySelector('.cmdk-item.selected');\n    if (selected) {\n        selected.scrollIntoView({ block: 'nearest' });\n    }\n}\n\n/**\n * Executes the action of an item\n * @param {Object} item - The item to execute\n * @returns {void}\n */\nexport function executeItemAction(item) {\n    if (!item) return;\n    \n    if (typeof item.action === 'function') {\n        item.action();\n    } else if (typeof item.action === 'string') {\n        if (/^(https?:)?\\/\\//.test(item.action)) {\n            window.location.assign(item.action);\n        } else {\n            window.location.pathname = item.action;\n        }\n    }\n}\n\n/**\n * Adds event listeners to the command palette elements\n * @param {Object} elements - The command palette elements\n * @param {Object} callbacks - The callbacks for the events\n * @returns {void}\n */\nexport function setupEventListeners(elements, callbacks) {\n    const { overlay, panel, search, list } = elements;\n    const { onSearch, onKeyDown, onItemClick, onOverlayClick, onPanelBlur, onFocusIn } = callbacks;\n    \n    // Search input events\n    if (search && onSearch) {\n        search.addEventListener('input', onSearch);\n    }\n    \n    if (search && onKeyDown) {\n        search.addEventListener('keydown', onKeyDown);\n    }\n    \n    // List events\n    if (list && onItemClick) {\n        list.addEventListener('click', (e) => {\n            e.preventDefault();\n            e.stopPropagation();\n            const item = e.target.closest('.cmdk-item');\n            if (item) {\n                const idx = parseInt(item.getAttribute('data-idx'), 10);\n                onItemClick(idx);\n            }\n        });\n    }\n    \n    // Mouse movement on list items\n    if (list) {\n        list.addEventListener('mousemove', (e) => {\n            const item = e.target.closest('.cmdk-item');\n            if (item) {\n                const idx = parseInt(item.getAttribute('data-idx'), 10);\n                if (callbacks.onItemHover) {\n                    callbacks.onItemHover(idx);\n                }\n            }\n        });\n    }\n    \n    // Overlay click\n    if (overlay && onOverlayClick) {\n        overlay.addEventListener('click', onOverlayClick);\n    }\n    \n    // Panel blur\n    if (panel && onPanelBlur) {\n        panel.addEventListener('blur', onPanelBlur, true);\n    }\n    \n    // Document focus\n    if (onFocusIn) {\n        document.addEventListener('focusin', onFocusIn);\n    }\n    \n    // Global keyboard shortcuts\n    if (callbacks.onGlobalKeyDown) {\n        window.addEventListener('keydown', callbacks.onGlobalKeyDown);\n    }\n}\n","/**\n * Main palette logic for the command palette\n */\n\nimport { filterItems } from './fuzzy.js';\nimport { renderList, scrollToSelected, executeItemAction, setupEventListeners } from './dom.js';\nimport { getTranslation, getTranslations } from './i18n.js';\n\n// Import SCSS for Vite to process\nimport '../scss/palette.scss';\n\n/**\n * Command Palette class\n */\nclass CommandPalette {\n    /**\n     * Constructor\n     * @param {string} id - The ID of the command palette\n     * @param {Array} items - The items to display in the command palette\n     * @param {string} locale - The locale for translations\n     */\n    constructor(id, items = [], locale = 'en') {\n        this.id = id;\n        this.items = items;\n        this.filtered = [...items];\n        this.selectedIdx = 0;\n        this.isOpen = false;\n        this.locale = locale;\n\n        console.log(items)\n        // Get DOM elements\n        this.elements = {\n            overlay: document.getElementById(`cmdkOverlay-${id}`),\n            panel: document.getElementById(`cmdkPanel-${id}`),\n            search: document.getElementById(`cmdkSearch-${id}`),\n            list: document.getElementById(`cmdkList-${id}`)\n        };\n        \n        // Set placeholder text based on locale\n        if (this.elements.search) {\n            this.elements.search.placeholder = getTranslation('search', this.locale);\n        }\n        \n        // Initialize\n        this.init();\n    }\n    \n    /**\n     * Initialize the command palette\n     * @returns {void}\n     */\n    init() {\n        // Set up event listeners\n        setupEventListeners(this.elements, {\n            onSearch: this.handleSearch.bind(this),\n            onKeyDown: this.handleKeyDown.bind(this),\n            onItemClick: this.selectItem.bind(this),\n            onItemHover: this.handleItemHover.bind(this),\n            onOverlayClick: this.close.bind(this),\n            onPanelBlur: this.handlePanelBlur.bind(this),\n            onFocusIn: this.handleFocusIn.bind(this),\n            onGlobalKeyDown: this.handleGlobalKeyDown.bind(this)\n        });\n        \n        // Initial render\n        renderList(this.elements.list, this.filtered, this.selectedIdx, this.locale);\n    }\n    \n    /**\n     * Open the command palette\n     * @returns {void}\n     */\n    open() {\n        if (this.isOpen) return;\n        \n        this.isOpen = true;\n        this.elements.overlay.style.display = 'block';\n        this.elements.panel.style.display = 'flex';\n        \n        setTimeout(() => this.elements.search.focus(), 20);\n        \n        this.elements.search.value = '';\n        this.filtered = [...this.items];\n        this.selectedIdx = 0;\n        \n        renderList(this.elements.list, this.filtered, this.selectedIdx, this.locale);\n    }\n    \n    /**\n     * Close the command palette\n     * @returns {void}\n     */\n    close() {\n        this.isOpen = false;\n        this.elements.overlay.style.display = 'none';\n        this.elements.panel.style.display = 'none';\n    }\n    \n    /**\n     * Handle search input\n     * @param {Event} e - The input event\n     * @returns {void}\n     */\n    handleSearch(e) {\n        this.filtered = filterItems(e.target.value.trim(), this.items);\n        this.selectedIdx = 0;\n        renderList(this.elements.list, this.filtered, this.selectedIdx, this.locale);\n    }\n    \n    /**\n     * Handle key down events\n     * @param {KeyboardEvent} e - The keyboard event\n     * @returns {void}\n     */\n    handleKeyDown(e) {\n        if (e.key === 'ArrowDown') {\n            e.preventDefault();\n            this.selectedIdx = (this.selectedIdx + 1) % this.filtered.length;\n            renderList(this.elements.list, this.filtered, this.selectedIdx, this.locale);\n            scrollToSelected(this.elements.list);\n        } else if (e.key === 'ArrowUp') {\n            e.preventDefault();\n            this.selectedIdx = (this.selectedIdx - 1 + this.filtered.length) % this.filtered.length;\n            renderList(this.elements.list, this.filtered, this.selectedIdx, this.locale);\n            scrollToSelected(this.elements.list);\n        } else if (e.key === 'Enter') {\n            e.preventDefault();\n            this.selectItem(this.selectedIdx);\n        } else if (e.key === 'Escape') {\n            this.close();\n        }\n    }\n    \n    /**\n     * Handle global key down events\n     * @param {KeyboardEvent} e - The keyboard event\n     * @returns {void}\n     */\n    handleGlobalKeyDown(e) {\n        if ((e.metaKey || e.ctrlKey) && e.key.toLowerCase() === 'k') {\n            e.preventDefault();\n            this.open();\n        }\n        \n        if (this.isOpen && e.key === 'Escape') {\n            this.close();\n        }\n    }\n    \n    /**\n     * Handle panel blur events\n     * @param {FocusEvent} e - The focus event\n     * @returns {void}\n     */\n    handlePanelBlur(e) {\n        // Espera brevemente antes de cerrar, para permitir que el click procese la acción\n        setTimeout(() => {\n            if (!this.elements.panel.contains(document.activeElement)) {\n                this.close();\n            }\n        }, 10);\n    }\n    \n    /**\n     * Handle focus in events\n     * @param {FocusEvent} e - The focus event\n     * @returns {void}\n     */\n    handleFocusIn(e) {\n        if (this.isOpen && !this.elements.panel.contains(e.target)) {\n            this.close();\n        }\n    }\n    \n    /**\n     * Handle item hover events\n     * @param {number} idx - The index of the hovered item\n     * @returns {void}\n     */\n    handleItemHover(idx) {\n        if (idx !== this.selectedIdx) {\n            this.selectedIdx = idx;\n            renderList(this.elements.list, this.filtered, this.selectedIdx, this.locale);\n        }\n    }\n    \n    /**\n     * Select an item\n     * @param {number} idx - The index of the item to select\n     * @returns {void}\n     */\n    selectItem(idx) {\n        const item = this.filtered[idx];\n        if (!item) return;\n        executeItemAction(item); // Ejecuta la acción primero\n        this.close();            // Luego cierra el panel\n    }\n}\n\n// Export the CommandPalette class\nexport default CommandPalette;\n\n// Make it available globally\nwindow.CommandPalette = CommandPalette;\n"],"names":["fuzzyMinLevenshtein","query","text","minDist","i","substr","levenshtein","a","b","m","n","dp","j","cost","filterItems","items","exactMatches","item","name","subtitle","distName","distSubtitle","score","substringMatch","translations","getTranslation","key","locale","renderList","listElement","selectedIdx","prevSelectedIdx","currentItemsCount","prevSelected","newSelected","noResultsText","id","templateElement","templateContent","fragment","idx","itemHtml","temp","li","scrollToSelected","selected","executeItemAction","setupEventListeners","elements","callbacks","overlay","panel","search","list","onSearch","onKeyDown","onItemClick","onOverlayClick","onPanelBlur","onFocusIn","e","CommandPalette"],"mappings":"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"}