var CommandPalette=function(){"use strict";function I(s,e){if(!s||!e)return 1/0;let t=1/0;for(let n=0;n<=e.length-s.length;n++){const r=e.substr(n,s.length);t=Math.min(t,b(s,r))}return t=Math.min(t,b(s,e)),t}function b(s,e){const t=s.length,n=e.length;if(t===0)return n;if(n===0)return t;const r=[];for(let i=0;i<=t;i++)r[i]=[i];for(let i=1;i<=n;i++)r[0][i]=i;for(let i=1;i<=t;i++)for(let o=1;o<=n;o++){const a=s[i-1].toLowerCase()===e[o-1].toLowerCase()?0:1;r[i][o]=Math.min(r[i-1][o]+1,r[i][o-1]+1,r[i-1][o-1]+a)}return r[t][n]}function v(s,e){if(!s)return e.slice();s=s.trim().toLowerCase();let t=e.filter(n=>{const r=n.name.toLowerCase(),i=n.subtitle?n.subtitle.toLowerCase():"";return r.includes(s)||i.includes(s)});return t.length>0?t:e.map(n=>{const r=n.name.toLowerCase(),i=n.subtitle?n.subtitle.toLowerCase():"",o=I(s,r),a=i?I(s,i):1/0,h=Math.min(o,a),d=r.includes(s)||i.includes(s);return{...n,_score:h,_substringMatch:d}}).sort((n,r)=>n._substringMatch&&!r._substringMatch?-1:!n._substringMatch&&r._substringMatch?1:n._score-r._score).filter(n=>n._substringMatch||n._score<=2)}const y={en:{search:"Search...",noResults:"No results"},es:{search:"Buscar...",noResults:"Sin resultados"},fr:{search:"Rechercher...",noResults:"Aucun rÃ©sultat"},de:{search:"Suchen...",noResults:"Keine Ergebnisse"},it:{search:"Cerca...",noResults:"Nessun risultato"},pt:{search:"Pesquisar...",noResults:"Sem resultados"},ru:{search:"ÐŸÐ¾Ð¸ÑÐº...",noResults:"ÐÐµÑ‚ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð²"},zh:{search:"æœç´¢...",noResults:"æ²¡æœ‰ç»“æžœ"},ja:{search:"æ¤œç´¢...",noResults:"çµæžœãªã—"},ar:{search:"Ø¨Ø­Ø«...",noResults:"Ù„Ø§ Ù†ØªØ§Ø¦Ø¬"}};function x(s,e="en"){return y[e]||(e="en"),y[e][s]||s}function C(s){if(typeof s!="string")return null;const e=s.toLowerCase();if(e.startsWith("mailto:"))return{type:"email",color:"#f59e0b"};if(e.startsWith("tel:"))return{type:"phone",color:"#10b981"};if(e.startsWith("http://"))return{type:"unsecure",color:"#ef4444"};const t=e.match(/^(ftp|ftps|sms|spotify|steam|slack|discord|zoom|teams|whatsapp):/);return t?{type:t[1],color:"#3b82f6"}:null}function p(s,e,t=0,n="en"){const r=s.getAttribute("data-selected-idx"),i=s.querySelectorAll(".cmdk-item").length;if(s.children.length>0&&e.length>0&&e.length===i&&r!==null){const c=s.querySelector(`.cmdk-item[data-idx="${r}"]`),f=s.querySelector(`.cmdk-item[data-idx="${t}"]`);if(c&&c.classList.remove("selected"),f){f.classList.add("selected"),s.setAttribute("data-selected-idx",t);return}}if(s.innerHTML="",e.length===0){const c=x("noResults",n);s.innerHTML=`<li style="padding: 16px; color: #8b8b93;">${c}</li>`;return}const o=s.id.replace("cmdkList-",""),a=document.getElementById(`cmdkItemTemplate-${o}`);if(!a){console.error(`Template element not found: cmdkItemTemplate-${o}`);return}const h=a.innerHTML,d=document.createDocumentFragment();e.forEach((c,f)=>{if(c._isSeparator){const g=document.createElement("li");g.className="cmdk-separator",g.innerHTML='<hr style="border: none; border-top: 1px solid #e5e5e5; margin: 8px 0;">',d.appendChild(g);return}let l=h;l=l.replace(/{{idx}}/g,f);const u=C(c.action);let m=c.name||"";if(u&&(m=`<span style="display: inline-block; padding: 2px 6px; margin-right: 6px; font-size: 10px; font-weight: bold; color: white; background-color: ${u.color}; border-radius: 3px; text-transform: uppercase;">${u.type}</span>`+m),l=l.replace(/{{name}}/g,m),c.icon){const g=s.id.replace("cmdkList-",""),P=window[`cmdkAllowHtmlIcons_${g}`]||!1;typeof c.icon=="string"&&c.icon.match(/^https?:\/\//)?l=l.replace(/{{#icon}}([\s\S]*?){{\/icon}}/g,`<img src="${c.icon}" class="cmdk-icon" style="width: 22px; height: 22px; object-fit: cover;">`):P?l=l.replace(/{{#icon}}([\s\S]*?){{\/icon}}/g,c.icon):(l=l.replace(/{{icon}}/g,c.icon),l=l.replace(/{{#icon}}([\s\S]*?){{\/icon}}/g,"$1"))}else l=l.replace(/{{#icon}}[\s\S]*?{{\/icon}}/g,"");c.subtitle?(l=l.replace(/{{subtitle}}/g,c.subtitle),l=l.replace(/{{#subtitle}}([\s\S]*?){{\/subtitle}}/g,"$1")):l=l.replace(/{{#subtitle}}[\s\S]*?{{\/subtitle}}/g,"");const L=document.createElement("div");L.innerHTML=l;const S=L.firstElementChild;f===t&&S.classList.add("selected"),d.appendChild(S)}),s.appendChild(d),s.setAttribute("data-selected-idx",t)}function w(s){const e=s.querySelector(".cmdk-item.selected");e&&e.scrollIntoView({block:"nearest"})}function R(s,e=!1){s&&(typeof s.action=="function"?s.action():typeof s.action=="string"&&(/^#/.test(s.action)?window.location.hash=s.action:e?window.open(s.action,"_blank"):window.location.href=s.action))}function E(s,e){const{overlay:t,panel:n,search:r,list:i}=s,{onSearch:o,onKeyDown:a,onItemClick:h,onOverlayClick:d,onPanelBlur:c,onFocusIn:f}=e;r&&o&&r.addEventListener("input",o),r&&a&&r.addEventListener("keydown",a),i&&h&&i.addEventListener("click",l=>{l.preventDefault(),l.stopPropagation();const u=l.target.closest(".cmdk-item");if(u){const m=parseInt(u.getAttribute("data-idx"),10);h(m)}}),i&&i.addEventListener("mousemove",l=>{const u=l.target.closest(".cmdk-item");if(u){const m=parseInt(u.getAttribute("data-idx"),10);e.onItemHover&&e.onItemHover(m)}}),t&&d&&t.addEventListener("click",d),n&&c&&n.addEventListener("blur",c,!0),f&&document.addEventListener("focusin",f),e.onGlobalKeyDown&&window.addEventListener("keydown",e.onGlobalKeyDown)}class A{constructor(e=!1,t="[CommandPalette]"){this.debug=e,this.prefix=t,this.debug&&console.log("%c"+this.prefix+" Debug mode is ENABLED","color: red; font-weight: bold;")}log(...e){this.debug&&console.log(this.prefix,...e)}warn(...e){this.debug&&console.warn(this.prefix,...e)}error(...e){this.debug&&console.error(this.prefix,...e)}info(...e){this.debug&&console.info(this.prefix,...e)}}function _(s=[],e=[],t=null){const n=[],r=new Set;let i=0;return s.forEach(a=>{typeof a.action=="string"&&r.add(a.action)}),document.querySelectorAll("a[href]").forEach(a=>{if(D(a,e)){t&&t.log("Link skipped (in excluded element):",a.href),i++;return}const h=a.href;if(r.has(h)){t&&t.log("Link skipped (duplicate):",h),i++;return}let d=M(a);if(!d){t&&t.log("Link skipped (no text):",h),i++;return}const c=K(a),f={icon:"ðŸ”—",name:d.trim(),subtitle:c||h,action:h};n.push(f),r.add(h)}),t&&t.log("Links scraper found",n.length,"links","(skipped",i,")"),n}function M(s){let e=s.textContent.trim();return!e&&s.hasAttribute("title")&&(e=s.getAttribute("title").trim()),!e&&s.hasAttribute("aria-label")&&(e=s.getAttribute("aria-label").trim()),e||null}function K(s){let e=s.parentElement;for(;e&&e!==document.body;){const t=e.querySelectorAll("h1, h2, h3, h4, h5, h6");for(const n of t)if(e.contains(n)&&e.contains(s)&&!s.contains(n)&&n!==s){const r=n.textContent.trim();if(r)return r}e=e.parentElement}return null}function D(s,e){if(!e||e.length===0)return!1;for(const t of e)try{if(s.matches(t)||s.closest(t))return!0}catch(n){console.error("Invalid exclude selector:",t,n)}return!1}class k{constructor(e,t=[],n={}){this.id=e;const{locale:r="en",debug:i=!1,enableLinksScraper:o=!1,linkScraperExcludeSelectors:a=[],maxRecentItems:h=0}=n;if(this.enableLinksScraper=o,this.linkScraperExcludeSelectors=a,this.logger=new A(i),this.enableLinksScraper){const d=_(t,this.linkScraperExcludeSelectors,this.logger);this.items=[...t,...d]}else this.items=t;this.filtered=[...this.items],this.selectedIdx=0,this.isOpen=!1,this.locale=r,this.debug=i,this.maxRecentItems=h,this.ctrlKeyPressed=!1,this.logger.log("Initializing command palette with",this.items.length,"items"),this.logger.log("Recent items:",h>0?`enabled (max: ${h})`:"disabled"),this.elements={overlay:document.getElementById(`cmdkOverlay-${e}`),panel:document.getElementById(`cmdkPanel-${e}`),search:document.getElementById(`cmdkSearch-${e}`),list:document.getElementById(`cmdkList-${e}`)},this.elements.search&&(this.elements.search.placeholder=x("search",this.locale)),this.init()}init(){E(this.elements,{onSearch:this.handleSearch.bind(this),onKeyDown:this.handleKeyDown.bind(this),onItemClick:this.selectItem.bind(this),onItemHover:this.handleItemHover.bind(this),onOverlayClick:this.close.bind(this),onPanelBlur:this.handlePanelBlur.bind(this),onFocusIn:this.handleFocusIn.bind(this),onGlobalKeyDown:this.handleGlobalKeyDown.bind(this)}),document.addEventListener("keydown",e=>{(e.key==="Control"||e.key==="Meta")&&(this.ctrlKeyPressed=!0,this.logger.log("Ctrl/Cmd key pressed"))}),document.addEventListener("keyup",e=>{(e.key==="Control"||e.key==="Meta")&&(this.ctrlKeyPressed=!1,this.logger.log("Ctrl/Cmd key released"))}),p(this.elements.list,this.filtered,this.selectedIdx,this.locale)}getRecentItemsKey(){return`cmdPalette_recentItems_${this.id}`}getRecentItems(){if(this.maxRecentItems===0)return[];try{const e=localStorage.getItem(this.getRecentItemsKey());if(!e)return[];const t=JSON.parse(e);return this.logger.log("Retrieved",t.length,"recent items from localStorage"),Array.isArray(t)?t:[]}catch(e){return this.logger.error("Error loading recent items from localStorage:",e),[]}}addRecentItem(e){if(this.maxRecentItems!==0)try{let t=this.getRecentItems();t=t.filter(n=>!(n.name===e.name&&n.action===e.action)),t.unshift(e),t.length>this.maxRecentItems&&(t=t.slice(0,this.maxRecentItems)),localStorage.setItem(this.getRecentItemsKey(),JSON.stringify(t)),this.logger.log("Added item to recent items:",e.name)}catch(t){this.logger.error("Error saving recent item to localStorage:",t)}}mergeItemsWithRecent(e,t){if(e.length===0)return t;const n=t.filter(i=>!e.some(o=>o.name===i.name&&o.action===i.action));if(n.length===0)return e;const r={_isSeparator:!0,name:"",action:null};return[...e,r,...n]}open(){if(this.isOpen)return;this.logger.log("Opening command palette"),this.isOpen=!0,this.elements.overlay.style.display="block",this.elements.panel.style.display="flex",setTimeout(()=>this.elements.search.focus(),20),this.elements.search.value="";const e=this.getRecentItems();for(this.filtered=this.mergeItemsWithRecent(e,this.items),this.selectedIdx=0;this.filtered[this.selectedIdx]&&this.filtered[this.selectedIdx]._isSeparator;)this.selectedIdx++;p(this.elements.list,this.filtered,this.selectedIdx,this.locale)}close(){this.logger.log("Closing command palette"),this.isOpen=!1,this.elements.overlay.style.display="none",this.elements.panel.style.display="none"}handleSearch(e){const t=e.target.value.trim();if(t){const n=this.getRecentItems(),r=this.mergeItemsWithRecent(n,this.items);this.filtered=v(t,r.filter(i=>!i._isSeparator))}else{const n=this.getRecentItems();this.filtered=this.mergeItemsWithRecent(n,this.items)}for(this.selectedIdx=0;this.filtered[this.selectedIdx]&&this.filtered[this.selectedIdx]._isSeparator;)this.selectedIdx++;p(this.elements.list,this.filtered,this.selectedIdx,this.locale)}handleKeyDown(e){if(e.key==="ArrowDown"){e.preventDefault();let t=(this.selectedIdx+1)%this.filtered.length;for(;this.filtered[t]&&this.filtered[t]._isSeparator;)t=(t+1)%this.filtered.length;this.selectedIdx=t,p(this.elements.list,this.filtered,this.selectedIdx,this.locale),w(this.elements.list)}else if(e.key==="ArrowUp"){e.preventDefault();let t=(this.selectedIdx-1+this.filtered.length)%this.filtered.length;for(;this.filtered[t]&&this.filtered[t]._isSeparator;)t=(t-1+this.filtered.length)%this.filtered.length;this.selectedIdx=t,p(this.elements.list,this.filtered,this.selectedIdx,this.locale),w(this.elements.list)}else e.key==="Enter"?(e.preventDefault(),this.selectItem(this.selectedIdx)):e.key==="Escape"&&this.close()}handleGlobalKeyDown(e){(e.metaKey||e.ctrlKey)&&e.key.toLowerCase()==="k"&&(e.preventDefault(),this.open()),this.isOpen&&e.key==="Escape"&&this.close()}handlePanelBlur(e){setTimeout(()=>{this.elements.panel.contains(document.activeElement)||this.close()},10)}handleFocusIn(e){this.isOpen&&!this.elements.panel.contains(e.target)&&this.close()}handleItemHover(e){e!==this.selectedIdx&&(this.selectedIdx=e,p(this.elements.list,this.filtered,this.selectedIdx,this.locale))}selectItem(e){const t=this.filtered[e];!t||t._isSeparator||(this.logger.log("Item selected:",t.name,"Ctrl/Cmd pressed:",this.ctrlKeyPressed),this.addRecentItem(t),R(t,this.ctrlKeyPressed),this.close())}}return window.CommandPalette=k,k}();
//# sourceMappingURL=palette.min.js.map
