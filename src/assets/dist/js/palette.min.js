var CommandPalette=function(){"use strict";function g(t,e){if(!t||!e)return 1/0;let s=1/0;for(let n=0;n<=e.length-t.length;n++){const l=e.substr(n,t.length);s=Math.min(s,b(t,l))}return s=Math.min(s,b(t,e)),s}function b(t,e){const s=t.length,n=e.length;if(s===0)return n;if(n===0)return s;const l=[];for(let i=0;i<=s;i++)l[i]=[i];for(let i=1;i<=n;i++)l[0][i]=i;for(let i=1;i<=s;i++)for(let a=1;a<=n;a++){const r=t[i-1].toLowerCase()===e[a-1].toLowerCase()?0:1;l[i][a]=Math.min(l[i-1][a]+1,l[i][a-1]+1,l[i-1][a-1]+r)}return l[s][n]}function C(t,e){if(!t)return e.slice();t=t.trim().toLowerCase();let s=e.filter(n=>{const l=n.name.toLowerCase(),i=n.subtitle?n.subtitle.toLowerCase():"";return l.includes(t)||i.includes(t)});return s.length>0?s:e.map(n=>{const l=n.name.toLowerCase(),i=n.subtitle?n.subtitle.toLowerCase():"",a=g(t,l),r=i?g(t,i):1/0,h=Math.min(a,r),d=l.includes(t)||i.includes(t);return{...n,_score:h,_substringMatch:d}}).sort((n,l)=>n._substringMatch&&!l._substringMatch?-1:!n._substringMatch&&l._substringMatch?1:n._score-l._score).filter(n=>n._substringMatch||n._score<=2)}const y={en:{search:"Search...",noResults:"No results"},es:{search:"Buscar...",noResults:"Sin resultados"},fr:{search:"Rechercher...",noResults:"Aucun rÃ©sultat"},de:{search:"Suchen...",noResults:"Keine Ergebnisse"},it:{search:"Cerca...",noResults:"Nessun risultato"},pt:{search:"Pesquisar...",noResults:"Sem resultados"},ru:{search:"ÐŸÐ¾Ð¸ÑÐº...",noResults:"ÐÐµÑ‚ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð²"},zh:{search:"æœç´¢...",noResults:"æ²¡æœ‰ç»“æžœ"},ja:{search:"æ¤œç´¢...",noResults:"çµæžœãªã—"},ar:{search:"Ø¨Ø­Ø«...",noResults:"Ù„Ø§ Ù†ØªØ§Ø¦Ø¬"}};function w(t,e="en"){return y[e]||(e="en"),y[e][t]||t}function S(t){if(typeof t!="string")return null;const e=t.toLowerCase();if(e.startsWith("mailto:"))return{type:"email",color:"#f59e0b"};if(e.startsWith("tel:"))return{type:"phone",color:"#10b981"};if(e.startsWith("http://"))return{type:"unsecure",color:"#ef4444"};const s=e.match(/^(ftp|ftps|sms|spotify|steam|slack|discord|zoom|teams|whatsapp):/);return s?{type:s[1],color:"#3b82f6"}:null}function p(t,e,s=0,n="en"){const l=t.getAttribute("data-selected-idx"),i=t.querySelectorAll(".cmdk-item").length;if(t.children.length>0&&e.length>0&&e.length===i&&l!==null){const c=t.querySelector(`.cmdk-item[data-idx="${l}"]`),u=t.querySelector(`.cmdk-item[data-idx="${s}"]`);if(c&&c.classList.remove("selected"),u){u.classList.add("selected"),t.setAttribute("data-selected-idx",s);return}}if(t.innerHTML="",e.length===0){const c=w("noResults",n);t.innerHTML=`<li style="padding: 16px; color: #8b8b93;">${c}</li>`;return}const a=t.id.replace("cmdkList-",""),r=document.getElementById(`cmdkItemTemplate-${a}`);if(!r){console.error(`Template element not found: cmdkItemTemplate-${a}`);return}const h=r.innerHTML,d=document.createDocumentFragment();e.forEach((c,u)=>{let o=h;o=o.replace(/{{idx}}/g,u);const f=S(c.action);let m=c.name||"";if(f&&(m=`<span style="display: inline-block; padding: 2px 6px; margin-right: 6px; font-size: 10px; font-weight: bold; color: white; background-color: ${f.color}; border-radius: 3px; text-transform: uppercase;">${f.type}</span>`+m),o=o.replace(/{{name}}/g,m),c.icon){const v=t.id.replace("cmdkList-",""),T=window[`cmdkAllowHtmlIcons_${v}`]||!1;typeof c.icon=="string"&&c.icon.match(/^https?:\/\//)?o=o.replace(/{{#icon}}([\s\S]*?){{\/icon}}/g,`<img src="${c.icon}" class="cmdk-icon" style="width: 22px; height: 22px; object-fit: cover;">`):T?o=o.replace(/{{#icon}}([\s\S]*?){{\/icon}}/g,c.icon):(o=o.replace(/{{icon}}/g,c.icon),o=o.replace(/{{#icon}}([\s\S]*?){{\/icon}}/g,"$1"))}else o=o.replace(/{{#icon}}[\s\S]*?{{\/icon}}/g,"");c.subtitle?(o=o.replace(/{{subtitle}}/g,c.subtitle),o=o.replace(/{{#subtitle}}([\s\S]*?){{\/subtitle}}/g,"$1")):o=o.replace(/{{#subtitle}}[\s\S]*?{{\/subtitle}}/g,"");const L=document.createElement("div");L.innerHTML=o;const k=L.firstElementChild;u===s&&k.classList.add("selected"),d.appendChild(k)}),t.appendChild(d),t.setAttribute("data-selected-idx",s)}function I(t){const e=t.querySelector(".cmdk-item.selected");e&&e.scrollIntoView({block:"nearest"})}function E(t,e=!1){t&&(typeof t.action=="function"?t.action():typeof t.action=="string"&&(/^#/.test(t.action)?window.location.hash=t.action:e?window.open(t.action,"_blank"):window.location.href=t.action))}function M(t,e){const{overlay:s,panel:n,search:l,list:i}=t,{onSearch:a,onKeyDown:r,onItemClick:h,onOverlayClick:d,onPanelBlur:c,onFocusIn:u}=e;l&&a&&l.addEventListener("input",a),l&&r&&l.addEventListener("keydown",r),i&&h&&i.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation();const f=o.target.closest(".cmdk-item");if(f){const m=parseInt(f.getAttribute("data-idx"),10);h(m)}}),i&&i.addEventListener("mousemove",o=>{const f=o.target.closest(".cmdk-item");if(f){const m=parseInt(f.getAttribute("data-idx"),10);e.onItemHover&&e.onItemHover(m)}}),s&&d&&s.addEventListener("click",d),n&&c&&n.addEventListener("blur",c,!0),u&&document.addEventListener("focusin",u),e.onGlobalKeyDown&&window.addEventListener("keydown",e.onGlobalKeyDown)}class A{constructor(e=!1,s="[CommandPalette]"){this.debug=e,this.prefix=s,this.debug&&console.log("%c"+this.prefix+" Debug mode is ENABLED","color: red; font-weight: bold;")}log(...e){this.debug&&console.log(this.prefix,...e)}warn(...e){this.debug&&console.warn(this.prefix,...e)}error(...e){this.debug&&console.error(this.prefix,...e)}info(...e){this.debug&&console.info(this.prefix,...e)}}function D(t=[],e=[],s=null){const n=[],l=new Set;let i=0;return t.forEach(r=>{typeof r.action=="string"&&l.add(r.action)}),document.querySelectorAll("a[href]").forEach(r=>{if(H(r,e)){s&&s.log("Link skipped (in excluded element):",r.href),i++;return}const h=r.href;if(l.has(h)){s&&s.log("Link skipped (duplicate):",h),i++;return}let d=K(r);if(!d){s&&s.log("Link skipped (no text):",h),i++;return}const c=P(r),u={icon:"ðŸ”—",name:d.trim(),subtitle:c||h,action:h};n.push(u),l.add(h)}),s&&s.log("Links scraper found",n.length,"links","(skipped",i,")"),n}function K(t){let e=t.textContent.trim();return!e&&t.hasAttribute("title")&&(e=t.getAttribute("title").trim()),!e&&t.hasAttribute("aria-label")&&(e=t.getAttribute("aria-label").trim()),e||null}function P(t){let e=t.parentElement;for(;e&&e!==document.body;){const s=e.querySelectorAll("h1, h2, h3, h4, h5, h6");for(const n of s)if(e.contains(n)&&e.contains(t)&&!t.contains(n)&&n!==t){const l=n.textContent.trim();if(l)return l}e=e.parentElement}return null}function H(t,e){if(!e||e.length===0)return!1;for(const s of e)try{if(t.matches(s)||t.closest(s))return!0}catch(n){console.error("Invalid exclude selector:",s,n)}return!1}class x{constructor(e,s=[],n="en",l=!1,i=!1,a=[]){if(this.id=e,this.enableLinksScraper=i,this.linkScraperExcludeSelectors=a,this.logger=new A(l),this.enableLinksScraper){const r=D(s,this.linkScraperExcludeSelectors,this.logger);this.items=[...s,...r]}else this.items=s;this.filtered=[...this.items],this.selectedIdx=0,this.isOpen=!1,this.locale=n,this.debug=l,this.ctrlKeyPressed=!1,this.logger.log("Initializing command palette with",this.items.length,"items"),this.elements={overlay:document.getElementById(`cmdkOverlay-${e}`),panel:document.getElementById(`cmdkPanel-${e}`),search:document.getElementById(`cmdkSearch-${e}`),list:document.getElementById(`cmdkList-${e}`)},this.elements.search&&(this.elements.search.placeholder=w("search",this.locale)),this.init()}init(){M(this.elements,{onSearch:this.handleSearch.bind(this),onKeyDown:this.handleKeyDown.bind(this),onItemClick:this.selectItem.bind(this),onItemHover:this.handleItemHover.bind(this),onOverlayClick:this.close.bind(this),onPanelBlur:this.handlePanelBlur.bind(this),onFocusIn:this.handleFocusIn.bind(this),onGlobalKeyDown:this.handleGlobalKeyDown.bind(this)}),document.addEventListener("keydown",e=>{(e.key==="Control"||e.key==="Meta")&&(this.ctrlKeyPressed=!0,this.logger.log("Ctrl/Cmd key pressed"))}),document.addEventListener("keyup",e=>{(e.key==="Control"||e.key==="Meta")&&(this.ctrlKeyPressed=!1,this.logger.log("Ctrl/Cmd key released"))}),p(this.elements.list,this.filtered,this.selectedIdx,this.locale)}open(){this.isOpen||(this.logger.log("Opening command palette"),this.isOpen=!0,this.elements.overlay.style.display="block",this.elements.panel.style.display="flex",setTimeout(()=>this.elements.search.focus(),20),this.elements.search.value="",this.filtered=[...this.items],this.selectedIdx=0,p(this.elements.list,this.filtered,this.selectedIdx,this.locale))}close(){this.logger.log("Closing command palette"),this.isOpen=!1,this.elements.overlay.style.display="none",this.elements.panel.style.display="none"}handleSearch(e){this.filtered=C(e.target.value.trim(),this.items),this.selectedIdx=0,p(this.elements.list,this.filtered,this.selectedIdx,this.locale)}handleKeyDown(e){e.key==="ArrowDown"?(e.preventDefault(),this.selectedIdx=(this.selectedIdx+1)%this.filtered.length,p(this.elements.list,this.filtered,this.selectedIdx,this.locale),I(this.elements.list)):e.key==="ArrowUp"?(e.preventDefault(),this.selectedIdx=(this.selectedIdx-1+this.filtered.length)%this.filtered.length,p(this.elements.list,this.filtered,this.selectedIdx,this.locale),I(this.elements.list)):e.key==="Enter"?(e.preventDefault(),this.selectItem(this.selectedIdx)):e.key==="Escape"&&this.close()}handleGlobalKeyDown(e){(e.metaKey||e.ctrlKey)&&e.key.toLowerCase()==="k"&&(e.preventDefault(),this.open()),this.isOpen&&e.key==="Escape"&&this.close()}handlePanelBlur(e){setTimeout(()=>{this.elements.panel.contains(document.activeElement)||this.close()},10)}handleFocusIn(e){this.isOpen&&!this.elements.panel.contains(e.target)&&this.close()}handleItemHover(e){e!==this.selectedIdx&&(this.selectedIdx=e,p(this.elements.list,this.filtered,this.selectedIdx,this.locale))}selectItem(e){const s=this.filtered[e];s&&(this.logger.log("Item selected:",s.name,"Ctrl/Cmd pressed:",this.ctrlKeyPressed),E(s,this.ctrlKeyPressed),this.close())}}return window.CommandPalette=x,x}();
//# sourceMappingURL=palette.min.js.map
