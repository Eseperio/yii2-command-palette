var CommandPalette=function(){"use strict";function I(s,e){if(!s||!e)return 1/0;let t=1/0;for(let i=0;i<=e.length-s.length;i++){const l=e.substr(i,s.length);t=Math.min(t,y(s,l))}return t=Math.min(t,y(s,e)),t}function y(s,e){const t=s.length,i=e.length;if(t===0)return i;if(i===0)return t;const l=[];for(let n=0;n<=t;n++)l[n]=[n];for(let n=1;n<=i;n++)l[0][n]=n;for(let n=1;n<=t;n++)for(let c=1;c<=i;c++){const a=s[n-1].toLowerCase()===e[c-1].toLowerCase()?0:1;l[n][c]=Math.min(l[n-1][c]+1,l[n][c-1]+1,l[n-1][c-1]+a)}return l[t][i]}function L(s,e){if(!s)return e.slice();s=s.trim().toLowerCase();let t=e.filter(i=>{const l=i.name.toLowerCase(),n=i.subtitle?i.subtitle.toLowerCase():"";return l.includes(s)||n.includes(s)});return t.length>0?t:e.map(i=>{const l=i.name.toLowerCase(),n=i.subtitle?i.subtitle.toLowerCase():"",c=I(s,l),a=n?I(s,n):1/0,g=Math.min(c,a),d=l.includes(s)||n.includes(s);return{...i,_score:g,_substringMatch:d}}).sort((i,l)=>i._substringMatch&&!l._substringMatch?-1:!i._substringMatch&&l._substringMatch?1:i._score-l._score).filter(i=>i._substringMatch||i._score<=2)}const b={en:{search:"Search...",noResults:"No results"},es:{search:"Buscar...",noResults:"Sin resultados"},fr:{search:"Rechercher...",noResults:"Aucun résultat"},de:{search:"Suchen...",noResults:"Keine Ergebnisse"},it:{search:"Cerca...",noResults:"Nessun risultato"},pt:{search:"Pesquisar...",noResults:"Sem resultados"},ru:{search:"Поиск...",noResults:"Нет результатов"},zh:{search:"搜索...",noResults:"没有结果"},ja:{search:"検索...",noResults:"結果なし"},ar:{search:"بحث...",noResults:"لا نتائج"}};function w(s,e="en"){return b[e]||(e="en"),b[e][s]||s}function C(s){if(typeof s!="string")return null;const e=s.toLowerCase();if(e.startsWith("mailto:"))return{type:"email",color:"#f59e0b"};if(e.startsWith("tel:"))return{type:"phone",color:"#10b981"};if(e.startsWith("http://"))return{type:"unsecure",color:"#ef4444"};const t=e.match(/^(ftp|ftps|sms|spotify|steam|slack|discord|zoom|teams|whatsapp):/);return t?{type:t[1],color:"#3b82f6"}:null}function m(s,e,t=0,i="en"){const l=s.getAttribute("data-selected-idx"),n=s.querySelectorAll(".cmdk-item").length;if(s.children.length>0&&e.length>0&&e.length===n&&l!==null){const o=s.querySelector(`.cmdk-item[data-idx="${l}"]`),f=s.querySelector(`.cmdk-item[data-idx="${t}"]`);if(o&&o.classList.remove("selected"),f){f.classList.add("selected"),s.setAttribute("data-selected-idx",t);return}}if(s.innerHTML="",e.length===0){const o=w("noResults",i);s.innerHTML=`<li style="padding: 16px; color: #8b8b93;">${o}</li>`;return}const c=s.id.replace("cmdkList-",""),a=document.getElementById(`cmdkItemTemplate-${c}`);if(!a){console.error(`Template element not found: cmdkItemTemplate-${c}`);return}const g=a.innerHTML,d=document.createDocumentFragment();e.forEach((o,f)=>{if(o._isSeparator){const p=document.createElement("li");p.className="cmdk-separator",p.innerHTML='<hr style="border: none; border-top: 1px solid #e5e5e5; margin: 8px 0;">',d.appendChild(p);return}let r=g;r=r.replace(/{{idx}}/g,f);const h=C(o.action);let u=o.name||"";if(h&&(u=`<span style="display: inline-block; padding: 2px 6px; margin-right: 6px; font-size: 10px; font-weight: bold; color: white; background-color: ${h.color}; border-radius: 3px; text-transform: uppercase;">${h.type}</span>`+u),r=r.replace(/{{name}}/g,u),o.icon){const p=s.id.replace("cmdkList-",""),K=window[`cmdkAllowHtmlIcons_${p}`]||!1;typeof o.icon=="string"&&o.icon.match(/^https?:\/\//)?r=r.replace(/{{#icon}}([\s\S]*?){{\/icon}}/g,`<img src="${o.icon}" class="cmdk-icon" style="width: 22px; height: 22px; object-fit: cover;">`):K?r=r.replace(/{{#icon}}([\s\S]*?){{\/icon}}/g,o.icon):(r=r.replace(/{{icon}}/g,o.icon),r=r.replace(/{{#icon}}([\s\S]*?){{\/icon}}/g,"$1"))}else r=r.replace(/{{#icon}}[\s\S]*?{{\/icon}}/g,"");o.subtitle?(r=r.replace(/{{subtitle}}/g,o.subtitle),r=r.replace(/{{#subtitle}}([\s\S]*?){{\/subtitle}}/g,"$1")):r=r.replace(/{{#subtitle}}[\s\S]*?{{\/subtitle}}/g,"");const k=document.createElement("div");k.innerHTML=r;const S=k.firstElementChild;f===t&&S.classList.add("selected"),d.appendChild(S)}),s.appendChild(d),s.setAttribute("data-selected-idx",t)}function x(s){const e=s.querySelector(".cmdk-item.selected");e&&e.scrollIntoView({block:"nearest"})}function R(s,e=!1){s&&(typeof s.action=="function"?s.action():typeof s.action=="string"&&(/^#/.test(s.action)?window.location.hash=s.action:e?window.open(s.action,"_blank"):window.location.href=s.action))}function _(s,e){const{overlay:t,panel:i,search:l,list:n}=s,{onSearch:c,onKeyDown:a,onItemClick:g,onOverlayClick:d,onPanelBlur:o,onFocusIn:f}=e;l&&c&&l.addEventListener("input",c),l&&a&&l.addEventListener("keydown",a),n&&g&&n.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation();const h=r.target.closest(".cmdk-item");if(h){const u=parseInt(h.getAttribute("data-idx"),10);g(u)}}),n&&n.addEventListener("mousemove",r=>{const h=r.target.closest(".cmdk-item");if(h){const u=parseInt(h.getAttribute("data-idx"),10);e.onItemHover&&e.onItemHover(u)}}),t&&d&&t.addEventListener("click",d),i&&o&&i.addEventListener("blur",o,!0),f&&document.addEventListener("focusin",f),e.onGlobalKeyDown&&window.addEventListener("keydown",e.onGlobalKeyDown)}class M{constructor(e=!1,t="[CommandPalette]"){this.debug=e,this.prefix=t,this.debug&&console.log("%c"+this.prefix+" Debug mode is ENABLED","color: red; font-weight: bold;")}log(...e){this.debug&&console.log(this.prefix,...e)}warn(...e){this.debug&&console.warn(this.prefix,...e)}error(...e){this.debug&&console.error(this.prefix,...e)}info(...e){this.debug&&console.info(this.prefix,...e)}}class v{constructor(e,t=[],i="en",l=!1,n=0){this.id=e,this.items=t,this.filtered=[...t],this.selectedIdx=0,this.isOpen=!1,this.locale=i,this.debug=l,this.maxRecentItems=n,this.ctrlKeyPressed=!1,this.logger=new M(l),this.logger.log("Initializing command palette with",t.length,"items"),this.logger.log("Recent items:",n>0?`enabled (max: ${n})`:"disabled"),this.elements={overlay:document.getElementById(`cmdkOverlay-${e}`),panel:document.getElementById(`cmdkPanel-${e}`),search:document.getElementById(`cmdkSearch-${e}`),list:document.getElementById(`cmdkList-${e}`)},this.elements.search&&(this.elements.search.placeholder=w("search",this.locale)),this.init()}init(){_(this.elements,{onSearch:this.handleSearch.bind(this),onKeyDown:this.handleKeyDown.bind(this),onItemClick:this.selectItem.bind(this),onItemHover:this.handleItemHover.bind(this),onOverlayClick:this.close.bind(this),onPanelBlur:this.handlePanelBlur.bind(this),onFocusIn:this.handleFocusIn.bind(this),onGlobalKeyDown:this.handleGlobalKeyDown.bind(this)}),document.addEventListener("keydown",e=>{(e.key==="Control"||e.key==="Meta")&&(this.ctrlKeyPressed=!0,this.logger.log("Ctrl/Cmd key pressed"))}),document.addEventListener("keyup",e=>{(e.key==="Control"||e.key==="Meta")&&(this.ctrlKeyPressed=!1,this.logger.log("Ctrl/Cmd key released"))}),m(this.elements.list,this.filtered,this.selectedIdx,this.locale)}getRecentItemsKey(){return`cmdPalette_recentItems_${this.id}`}getRecentItems(){if(this.maxRecentItems===0)return[];try{const e=localStorage.getItem(this.getRecentItemsKey());if(!e)return[];const t=JSON.parse(e);return this.logger.log("Retrieved",t.length,"recent items from localStorage"),Array.isArray(t)?t:[]}catch(e){return this.logger.error("Error loading recent items from localStorage:",e),[]}}addRecentItem(e){if(this.maxRecentItems!==0)try{let t=this.getRecentItems();t=t.filter(i=>!(i.name===e.name&&i.action===e.action)),t.unshift(e),t.length>this.maxRecentItems&&(t=t.slice(0,this.maxRecentItems)),localStorage.setItem(this.getRecentItemsKey(),JSON.stringify(t)),this.logger.log("Added item to recent items:",e.name)}catch(t){this.logger.error("Error saving recent item to localStorage:",t)}}mergeItemsWithRecent(e,t){if(e.length===0)return t;const i=t.filter(n=>!e.some(c=>c.name===n.name&&c.action===n.action));if(i.length===0)return e;const l={_isSeparator:!0,name:"",action:null};return[...e,l,...i]}open(){if(this.isOpen)return;this.logger.log("Opening command palette"),this.isOpen=!0,this.elements.overlay.style.display="block",this.elements.panel.style.display="flex",setTimeout(()=>this.elements.search.focus(),20),this.elements.search.value="";const e=this.getRecentItems();for(this.filtered=this.mergeItemsWithRecent(e,this.items),this.selectedIdx=0;this.filtered[this.selectedIdx]&&this.filtered[this.selectedIdx]._isSeparator;)this.selectedIdx++;m(this.elements.list,this.filtered,this.selectedIdx,this.locale)}close(){this.logger.log("Closing command palette"),this.isOpen=!1,this.elements.overlay.style.display="none",this.elements.panel.style.display="none"}handleSearch(e){const t=e.target.value.trim();if(t){const i=this.getRecentItems(),l=this.mergeItemsWithRecent(i,this.items);this.filtered=L(t,l.filter(n=>!n._isSeparator))}else{const i=this.getRecentItems();this.filtered=this.mergeItemsWithRecent(i,this.items)}for(this.selectedIdx=0;this.filtered[this.selectedIdx]&&this.filtered[this.selectedIdx]._isSeparator;)this.selectedIdx++;m(this.elements.list,this.filtered,this.selectedIdx,this.locale)}handleKeyDown(e){if(e.key==="ArrowDown"){e.preventDefault();let t=(this.selectedIdx+1)%this.filtered.length;for(;this.filtered[t]&&this.filtered[t]._isSeparator;)t=(t+1)%this.filtered.length;this.selectedIdx=t,m(this.elements.list,this.filtered,this.selectedIdx,this.locale),x(this.elements.list)}else if(e.key==="ArrowUp"){e.preventDefault();let t=(this.selectedIdx-1+this.filtered.length)%this.filtered.length;for(;this.filtered[t]&&this.filtered[t]._isSeparator;)t=(t-1+this.filtered.length)%this.filtered.length;this.selectedIdx=t,m(this.elements.list,this.filtered,this.selectedIdx,this.locale),x(this.elements.list)}else e.key==="Enter"?(e.preventDefault(),this.selectItem(this.selectedIdx)):e.key==="Escape"&&this.close()}handleGlobalKeyDown(e){(e.metaKey||e.ctrlKey)&&e.key.toLowerCase()==="k"&&(e.preventDefault(),this.open()),this.isOpen&&e.key==="Escape"&&this.close()}handlePanelBlur(e){setTimeout(()=>{this.elements.panel.contains(document.activeElement)||this.close()},10)}handleFocusIn(e){this.isOpen&&!this.elements.panel.contains(e.target)&&this.close()}handleItemHover(e){e!==this.selectedIdx&&(this.selectedIdx=e,m(this.elements.list,this.filtered,this.selectedIdx,this.locale))}selectItem(e){const t=this.filtered[e];!t||t._isSeparator||(this.logger.log("Item selected:",t.name,"Ctrl/Cmd pressed:",this.ctrlKeyPressed),this.addRecentItem(t),R(t,this.ctrlKeyPressed),this.close())}}return window.CommandPalette=v,v}();
//# sourceMappingURL=palette.min.js.map
