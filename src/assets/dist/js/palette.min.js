var CommandPalette=function(){"use strict";function g(t,e){if(!t||!e)return 1/0;let i=1/0;for(let s=0;s<=e.length-t.length;s++){const o=e.substr(s,t.length);i=Math.min(i,I(t,o))}return i=Math.min(i,I(t,e)),i}function I(t,e){const i=t.length,s=e.length;if(i===0)return s;if(s===0)return i;const o=[];for(let n=0;n<=i;n++)o[n]=[n];for(let n=1;n<=s;n++)o[0][n]=n;for(let n=1;n<=i;n++)for(let r=1;r<=s;r++){const a=t[n-1].toLowerCase()===e[r-1].toLowerCase()?0:1;o[n][r]=Math.min(o[n-1][r]+1,o[n][r-1]+1,o[n-1][r-1]+a)}return o[i][s]}function L(t,e){if(!t)return e.slice();t=t.trim().toLowerCase();let i=e.filter(s=>{const o=s.name.toLowerCase(),n=s.subtitle?s.subtitle.toLowerCase():"";return o.includes(t)||n.includes(t)});return i.length>0?i:e.map(s=>{const o=s.name.toLowerCase(),n=s.subtitle?s.subtitle.toLowerCase():"",r=g(t,o),a=n?g(t,n):1/0,m=Math.min(r,a),u=o.includes(t)||n.includes(t);return{...s,_score:m,_substringMatch:u}}).sort((s,o)=>s._substringMatch&&!o._substringMatch?-1:!s._substringMatch&&o._substringMatch?1:s._score-o._score).filter(s=>s._substringMatch||s._score<=2)}const b={en:{search:"Search...",noResults:"No results"},es:{search:"Buscar...",noResults:"Sin resultados"},fr:{search:"Rechercher...",noResults:"Aucun résultat"},de:{search:"Suchen...",noResults:"Keine Ergebnisse"},it:{search:"Cerca...",noResults:"Nessun risultato"},pt:{search:"Pesquisar...",noResults:"Sem resultados"},ru:{search:"Поиск...",noResults:"Нет результатов"},zh:{search:"搜索...",noResults:"没有结果"},ja:{search:"検索...",noResults:"結果なし"},ar:{search:"بحث...",noResults:"لا نتائج"}};function y(t,e="en"){return b[e]||(e="en"),b[e][t]||t}function f(t,e,i=0,s="en"){const o=t.getAttribute("data-selected-idx"),n=t.querySelectorAll(".cmdk-item").length;if(t.children.length>0&&e.length>0&&e.length===n&&o!==null){const c=t.querySelector(`.cmdk-item[data-idx="${o}"]`),d=t.querySelector(`.cmdk-item[data-idx="${i}"]`);if(c&&c.classList.remove("selected"),d){d.classList.add("selected"),t.setAttribute("data-selected-idx",i);return}}if(t.innerHTML="",e.length===0){const c=y("noResults",s);t.innerHTML=`<li style="padding: 16px; color: #8b8b93;">${c}</li>`;return}const r=t.id.replace("cmdkList-",""),a=document.getElementById(`cmdkItemTemplate-${r}`);if(!a){console.error(`Template element not found: cmdkItemTemplate-${r}`);return}const m=a.innerHTML,u=document.createDocumentFragment();e.forEach((c,d)=>{let l=m;if(l=l.replace(/{{idx}}/g,d),l=l.replace(/{{name}}/g,c.name||""),c.icon){const S=t.id.replace("cmdkList-",""),C=window[`cmdkAllowHtmlIcons_${S}`]||!1;typeof c.icon=="string"&&c.icon.match(/^https?:\/\//)?l=l.replace(/{{#icon}}([\s\S]*?){{\/icon}}/g,`<img src="${c.icon}" class="cmdk-icon" style="width: 22px; height: 22px; object-fit: cover;">`):C?l=l.replace(/{{#icon}}([\s\S]*?){{\/icon}}/g,c.icon):(l=l.replace(/{{icon}}/g,c.icon),l=l.replace(/{{#icon}}([\s\S]*?){{\/icon}}/g,"$1"))}else l=l.replace(/{{#icon}}[\s\S]*?{{\/icon}}/g,"");c.subtitle?(l=l.replace(/{{subtitle}}/g,c.subtitle),l=l.replace(/{{#subtitle}}([\s\S]*?){{\/subtitle}}/g,"$1")):l=l.replace(/{{#subtitle}}[\s\S]*?{{\/subtitle}}/g,"");const h=document.createElement("div");h.innerHTML=l;const p=h.firstElementChild;d===i&&p.classList.add("selected"),u.appendChild(p)}),t.appendChild(u),t.setAttribute("data-selected-idx",i)}function v(t){const e=t.querySelector(".cmdk-item.selected");e&&e.scrollIntoView({block:"nearest"})}function k(t){t&&(typeof t.action=="function"?t.action():typeof t.action=="string"&&(/^#/.test(t.action)?window.location.hash=t.action:window.location.href=t.action))}function x(t,e){const{overlay:i,panel:s,search:o,list:n}=t,{onSearch:r,onKeyDown:a,onItemClick:m,onOverlayClick:u,onPanelBlur:c,onFocusIn:d}=e;o&&r&&o.addEventListener("input",r),o&&a&&o.addEventListener("keydown",a),n&&m&&n.addEventListener("click",l=>{l.preventDefault(),l.stopPropagation();const h=l.target.closest(".cmdk-item");if(h){const p=parseInt(h.getAttribute("data-idx"),10);m(p)}}),n&&n.addEventListener("mousemove",l=>{const h=l.target.closest(".cmdk-item");if(h){const p=parseInt(h.getAttribute("data-idx"),10);e.onItemHover&&e.onItemHover(p)}}),i&&u&&i.addEventListener("click",u),s&&c&&s.addEventListener("blur",c,!0),d&&document.addEventListener("focusin",d),e.onGlobalKeyDown&&window.addEventListener("keydown",e.onGlobalKeyDown)}class w{constructor(e,i=[],s="en"){this.id=e,this.items=i,this.filtered=[...i],this.selectedIdx=0,this.isOpen=!1,this.locale=s,console.log(i),this.elements={overlay:document.getElementById(`cmdkOverlay-${e}`),panel:document.getElementById(`cmdkPanel-${e}`),search:document.getElementById(`cmdkSearch-${e}`),list:document.getElementById(`cmdkList-${e}`)},this.elements.search&&(this.elements.search.placeholder=y("search",this.locale)),this.init()}init(){x(this.elements,{onSearch:this.handleSearch.bind(this),onKeyDown:this.handleKeyDown.bind(this),onItemClick:this.selectItem.bind(this),onItemHover:this.handleItemHover.bind(this),onOverlayClick:this.close.bind(this),onPanelBlur:this.handlePanelBlur.bind(this),onFocusIn:this.handleFocusIn.bind(this),onGlobalKeyDown:this.handleGlobalKeyDown.bind(this)}),f(this.elements.list,this.filtered,this.selectedIdx,this.locale)}open(){this.isOpen||(this.isOpen=!0,this.elements.overlay.style.display="block",this.elements.panel.style.display="flex",setTimeout(()=>this.elements.search.focus(),20),this.elements.search.value="",this.filtered=[...this.items],this.selectedIdx=0,f(this.elements.list,this.filtered,this.selectedIdx,this.locale))}close(){this.isOpen=!1,this.elements.overlay.style.display="none",this.elements.panel.style.display="none"}handleSearch(e){this.filtered=L(e.target.value.trim(),this.items),this.selectedIdx=0,f(this.elements.list,this.filtered,this.selectedIdx,this.locale)}handleKeyDown(e){e.key==="ArrowDown"?(e.preventDefault(),this.selectedIdx=(this.selectedIdx+1)%this.filtered.length,f(this.elements.list,this.filtered,this.selectedIdx,this.locale),v(this.elements.list)):e.key==="ArrowUp"?(e.preventDefault(),this.selectedIdx=(this.selectedIdx-1+this.filtered.length)%this.filtered.length,f(this.elements.list,this.filtered,this.selectedIdx,this.locale),v(this.elements.list)):e.key==="Enter"?(e.preventDefault(),this.selectItem(this.selectedIdx)):e.key==="Escape"&&this.close()}handleGlobalKeyDown(e){(e.metaKey||e.ctrlKey)&&e.key.toLowerCase()==="k"&&(e.preventDefault(),this.open()),this.isOpen&&e.key==="Escape"&&this.close()}handlePanelBlur(e){setTimeout(()=>{this.elements.panel.contains(document.activeElement)||this.close()},10)}handleFocusIn(e){this.isOpen&&!this.elements.panel.contains(e.target)&&this.close()}handleItemHover(e){e!==this.selectedIdx&&(this.selectedIdx=e,f(this.elements.list,this.filtered,this.selectedIdx,this.locale))}selectItem(e){const i=this.filtered[e];i&&(k(i),this.close())}}return window.CommandPalette=w,w}();
//# sourceMappingURL=palette.min.js.map
